---
typora-copy-images-to: img\04\01
---

# 框架搭建 & 持续集成（上）

## ★课程简介

### ◇注意

![parcel 问题](img/04/01/2018-8-30-15-46-16.png)


 如果出现上面图中的问题，请看下面👇

视频中使用 `npx parcel --no-cache` 命令，请自行改成 `npx parcel index.html --no-cache`，不改会出问题。

视频中使用 `npx parcel --no-cache` 命令，请自行改成 `npx parcel index.html --no-cache`，不改会出问题。

视频中使用 `npx parcel --no-cache` 命令，请自行改成 `npx parcel index.html --no-cache`，不改会出问题。

### ◇注意

如果你安装 node-sass 失败，那么请直接百度或者谷歌搜索「node sass 安装失败」

### ◇目录

1. 需求分析
2. UI 设计
3. 写代码
   1. 搭建框架
   2. button.vue
   3. icon.vue
4. 单元测试

我们需要通过 button 作为例子，来说明如何把这个项目的框架搭建起来。

### ◇注意

如果你在使用 WebStorm，请

1. 将 WebStorm 升级到 2018 版以上

2. 关闭 WebStorm 的 Safe Write 功能：

   ![取消勾选safe write](img/04/01/2018-7-19-23-36-11.png)

---

## ★🚨 parcel 报错怎么办（文章）

### ①No entres found 报错

![No entries found](img/04/01/2019-4-1-14-58-43.png)

在 parcel 后面添加 index.html 即可

比如：

```
./node_modules/.bin/parcel 改成./node_modules/.bin/parcel index.html
npx parcel 改成 npx parcel index.html
```

### ② ERERM 报错

![image.png](img/04/01/2019-4-2-13-36-57.png)

改用全局安装的 parcel 试试运气吧：

```bash
npm i -g parcel
parcel index.html --no-cache
```

## ★🚨 npm 报错怎么办？（文章）

如果 npm 报错，就改用 yarn 试试吧

```bash
rm -rf node_modules
yarn install
```

你没有安装 yarn? 自己去 yarn 官网下载安装包安装

## ★讲义（文章）

### ◇软件

- node 8
- npm 6，需要给 npm 配置淘宝源：npm config set registry <https://registry.npm.taobao.org/>
- 先不要用 yarn 以及 cnpm，只有在 npm 出问题的时候你再重试 yarn 和 cnpm。
- Windows 用户请先安装 Git Bash，教程见[这里](https://jscode.me/t/git-bash/97)

### ◇写给 Windows 用户的话

如果你目前在使用 Windows，那么需要注意一些事情：

1. 我们的工具大部分是命令行工具，如果你是 Windows 用户，那么你在使用这些工具的时候可能会遇到一些小问题。

   如果遇到命令行报错

   1. 首先你应该把报错的关键信息复制到 Google 看看有没有人遇到相同的问题，再看看他们是怎么解决的
   2. 如果你搜不到解决方案，可以在群里问我，但是要注意，请提供给我详细的报错信息（截图或复制到 jsbin.com）

2. 在看视频的过程中，有的时候你复制我运行的命令，发现命令报错，

   1. 你可以看完整节课的视频后再自己运行，因为很有可能我在后半段解决了这个问题
   2. 也有可能是 Windows 的问题，请在群里问我（记得截图）

### ◇代码

直播的时候写的代码：<https://github.com/FrankFang/frank-test-1>

设计稿：<https://yuque.com/u29422/gulu/197281/measure>

### ◇预先运行

1. 如果你的 npm 版本不到 6，就把 npm 升级到 6 以上： `npm i -g npm`
2. [设置 node-sass 的淘宝源](https://github.com/lmk123/blog/issues/28)
3. 如果还有问题，请尝试删除 node_modules 目录然后重新 `npm i` 。
4. 如果还有问题，请运行 `npm cache clean --force`

### ◇难点

1. Windows 安装 node-sass 容易失败
   - 可以看看[别人如何安装](https://www.google.com.hk/search?q=windows+安装+node-sass)
   - 可以把代码中的 `<style lang="scss">` 改为 `<style lang="less">` 使用 less 来写 CSS，语法跟 SCSS 差不多，但是安装起来快很多。

### ◇作业

这一课的作业需要你自己把 parcel + vue 的框架搭起来。详细请看课后题。

### ◇预告

下节课讲

1. 自动化测试
2. 发布我们的第一个轮子

### ◇UI

[语雀链接](https://yuque.com/u29422/gulu/197281)

### ◇知识点

1. parcel
   1. [官方推荐的配置](https://cn.vuejs.org/v2/guide/installation.html#Parcel)
2. scss
3. Vue 单文件组件
4. WebStorm 的快捷键
5. CSS变量和:root选择器
6. Vue.component
7. 插槽（slot）
8. $emit
9. props
10. Headless Chrome
11. Mock
12. npm scripts

## ★需求分析

**①用例图**

![1556265448963](img/04/01/1556265448963.png)

可以参考[按钮 Button - Ant Design](https://ant.design/components/button-cn/)这个UI轮子！

轮子做得再好一点的话，会有很多种状态……图中给出了5种需求，其实还有2种需求，如点击按钮会弹出一个二级菜单，还有按钮可以分成是一组的，如：

![1556265781837](img/04/01/1556265781837.png)

当然还会有其它需求！

**②画个按钮**

![1556266458406](img/04/01/1556266458406.png)

> border为1px
>
> border-radius为4px
>
> 按钮的宽高：
>
> 一般来说按钮的高度要与input的高度一致，不然你左边放一个input，然后右边放一个button，如果一个高一个矮，那成何体统啊？
>
> 言归正传，它的高度一般是32px，为什么是32呢？因为我们喜欢它是8的倍数呀，而8是2的三次方！你看浏览器默认字体高度为16px，也是8的倍数呀！当然，你用10的倍数也行，如30px、40px这样！
>
> 当然我们这里的字体为14px！
>
> 画出框后，添加文字，弄成是字14，行高14，然后弄成是绝对居中的恶，只要有两个线垂直交叉就好了，然后摁下alt键看看，它与button之间的关系是不是绝对居中的！
>
> 接着就是弄，不同状态的按钮了，状态的不同一般体现在样式上，如边框的颜色，字的颜色的
>
> 关于symbol，在墨刀上就是右键的这个：
>
> ![1556269832392](img/04/01/1556269832392.png)
>
> 使用母版的好处，从这个母版复制而来的组件，一旦母版修改了样式，它们也会跟着变，适用于某一天觉得按钮不好看，然后批量更改所有按钮！而不是一个个改！因此一个按钮能成为母版，一般它就是最基础的样式了，即所有按钮都必须要有的样式，接着再对个别按钮进行个性化的修改！

我自己稍微弄了一个：

![1556268163346](img/04/01/1556268163346.png)

技巧：

选中某个组件（如A），摁下alt键，移动光标，移到某个组件身上（如B），你会发现A与B之间存在的间距大小：

![2](img/04/01/2.gif)

这样就解决了我之前用肉眼观察图标与文本内容之间的间距，然后调节它们俩

还有一个需要注意的是，在让按钮的内容（包括图标）左右居中的时候：

![1556268735284](img/04/01/1556268735284.png)

而我们摁的左右键是，调整X的大小，如果按钮与图标以及文本不是一组的话，那么你调整按钮的X大小的话，那么内容就会错位了！

每次的平移，即摁一下左键或者右键都是1px

小结：

以上操作并不会写UI轮子的重点，你只需要知道这些东西是很简单的就画出来的就好了！

**➹：**[原型设计工具“MockingBot 墨刀”深度使用吐槽 - ZFreet CHeung](http://www.zfreet.me/post/mockingbot-prototyping-tools-feedback.html)

**➹：**[墨刀(modao.cc)为什么这么难用? - 知乎](https://www.zhihu.com/question/62806376)

## ★项目初始化





## ★总结

- sketch有iconfont的图标库：

  ![1556271220589](img/04/01/1556271220589.png)

  而墨刀则咩有加入iconfont图标库！一般我们都需要自己从网上下载，然后添加进去！

  所以在我搜索upload这个图标的时候，只有那么几种选择！而不像是这样：

  ![1556271313248](img/04/01/1556271313248.png)

  **➹：**[墨刀 - 教程: 带你玩转墨刀](https://modao.cc/tutorials/6892)

- 