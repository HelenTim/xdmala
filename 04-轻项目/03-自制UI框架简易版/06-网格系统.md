---
typora-copy-images-to: img\06
---

# 简单轮子：网格系统

## ★课程简介

网格系统

1. 什么是 Grid
2. UI
3. 代码
4. 测试

## ★讲义

### ◇什么是网格系统/栅格系统？

[知乎问答](https://www.zhihu.com/question/19602912)

就是把一个 div 分成 N 个部分（N = 12,16,24...），每个部分无空隙或者有空隙。
完。

### ◇设计图

![UI](img/06/2018-7-7-15-39-7.png)

[语雀链接](https://yuque.com/u29422/gulu/228198)

### ◇代码

[链接](https://github.com/FrankFang/frank-test-1/tree/grid/src)
请注意看 row.vue 和 col.vue，已经对应的 test 文件

### ◇测试

[代码](https://github.com/FrankFang/frank-test-1/blob/grid/test/row.test.js#L14)

这次测试多了一个知识点：done 的使用

---

## ★网格系统

### ◇回顾前几节课

01、02、03这三节课不记得讲了什么，也没有啥关系，你只需要记住一句话即可，而这句话需要在你的工作生涯里边反复的去理解，最终你会发现这句话是多么的真实。

那么这句话是什么呢？——那就是：

![1562057606179](img/06/1562057606179.png)

> 是工程师的工作，而不是程序员的工作

这句话就是前三课里边的核心内容啦！

可是，不写代码，我们能干嘛呢？

1. 你可以回顾一下我们整个网站的开发流程

你就会知道，剩下的不是写代码的50%工作是在讨论需求、跟UI设计师扯皮、跟后台设计师协商设计接口、测试……

这4项内容一定要超过工作内容的40%，至此，你才是一个合格的程序员，或者说应该是工程师（我们要做的东西是工程，你可以看到应聘岗位都叫前端工程师，而不是前端程序员），毕竟程序员主要是写程序的。

总之工程师和程序员的区别是：**工程师大部分的工作不是写代码，而程序员主要是写代码。**

越到高级你会发现，一开始你有90%的时间在写代码，后来80%、40%、30%，最后你做到高级程序员，你会发现我只需要有10%的时间在写代码就已经非常不错了，即**一周能有一天写代码的时间就已经非常不错了，而这就叫做高级程序员啦，毕竟TA要关心很多其它的事情。**

话又说来，前三节课所讲的内容是50%以上的时间不是在写程序，而45课则是告诉大家「如果你要从0开始搭建一个稍微大型一点的项目，你要考虑哪些东西？」

比如你要用哪些工具、哪些测试框架、以及我要如何去分我的目录之类的……

接下来的几节课就专心写代码吧！不用去管那些配置之类的问题了，总之之后就不停地写代码就好了。

### ◇什么是网格系统？

在一些地方也可以叫栅（读zha吧，如果你喜欢可以读shan）格系统

那么它是什么呢？——你可以到知乎里边搜搜

但其实它并没有明确定义，当然，我们自己可以给它一个定义：

> 就是把一个 div 分成 N 个部分（N = 12,16,24...），每个部分无空隙或者有空隙。

网格系统是**Web设计师**的一个方法论，注意这不是前端的一个方法论

我们以淘宝为例，看看淘宝是否使用了网格系统，当然它或许不是一个非常典型的网格系统，但是我觉得它应该也是用到了：

![1562062449884](img/06/1562062449884.png)

我们可以用眼睛来看看淘宝首页的结构是怎样的，如

从上往下看（分析）：

1. 左右结构
2. 左中右结构
3. ……

在CSS里边有个特别简单的规则，在CSS grid （未来的语法）出来之前，CSS只有两种布局，一种是横向布局，一种是纵向布局。

你可以看到左右结构是横向布局，如果你把左右两部分当作一个整体，把左中右这三部分同样当作是一个整体，那么这两个整体之间就是上下布局啦！

而每个上下布局里边就是左右和左中右结构啦！

而左中右的中，又是上中下这样的纵向布局！

![1562063473735](img/06/1562063473735.png)

除了这横向和纵向两种布局方式以外，就没有其它布局方式了。

而我们的网格系统主要研究的是「如何做横向布局？」

继续分析淘宝首页：

![1562064791806](img/06/1562064791806.png)

> 有种木桶效应的感觉，如果一个div针对水平另一个div来说是短板，那么这个短板很有可能是因为上下结构而来的。
>
> ![img](img/06/4d086e061d950a7bc78c210b08d162d9f3d3c940.jpg)

经过分析之后，你可以发现，CSS的所有布局方式都可以简化为横向布局和纵向布局

可是我知道这个又能怎样呢？

呵呵，知道这个之后，你就可以进一步去想想「我能不能把这种东西简化成一个组件呢？然后以后所有的横向布局和纵向布局都可以通过这个组件搞定！这样一来，就不用自己去想这些布局该如何写了」

于是，我们就借鉴了一个设计师的概念——栅格系统

而前端可没有这个概念，这个概念可是设计师发明出来的

### ◇看看芳芳的设计图

**➹：**[Grid · 轱辘 · 语雀](https://www.yuque.com/u29422/gulu/228198)

无Gutter：

![1562069887335](img/06/1562069887335.png)

水平div之间是没有空隙的，而这个空隙在英文里边叫做Gutter（中间有一条小沟）

如果你想要让它们俩中间有空隙，那么就是这样：

![1562070084546](img/06/1562070084546.png)

那么我们现在要做一个什么样的东西呢？——能实现左右布局，而且可以有空隙，也可以没有空隙，而这就是我们的目的啦！
在这里用例就不用画了，即那些所谓的交互。毕竟它就是一种CSS布局而已

既然如此，那么我们只好想想这API应该怎么设计了？

### ◇API设计

> 这API该如何设计呢？即这自定义元素的DOM该如何写呢？

假设一个用户使用你的组件，你觉得他会怎么使用？

当然，你可以去参考一下各个大牌的UI厂商是怎么做的：

**➹：**[组件 - Element](https://element.eleme.cn/#/zh-CN/component/layout)

**➹：**[栅格 Grid - Ant Design](https://ant.design/components/grid-cn/)

**➹：**[栅格 Grid - Ant Design Vue](https://vue.ant.design/components/grid-cn/)

芳芳主要参看ant design 是怎么做的

分析如下：

![1562114046795](img/06/1562114046795.png)

而ele则是这样的：

![1562114166157](img/06/1562114166157.png)

> 如果你发现打开ele很慢，那么你就打开network看看是哪个请求慢了

不管怎样，一般我们在设计轮子的时候，一定要防止「其它的轮子做成是圆的，而你的轮子则是做成方的」

通过对比，我们打算仿制的是ant design的

接下来，让我们来想想我们应该做成什么样的：

1. 做个左右结构，左边50%，右边50%。

   ```vue
   <g-row>
   	<g-col></g-col>
   	<g-col></g-col>
   </g-row>
   ```

   上边这种姿势并不好，因为你内置自动计算为50%，可是假如是40% 和 60%呢？这该怎么自动计算？
   所以我们设置了这样一个规则，默认整体的宽度为24，当然，也有人搞为12和16的，不过这都没有24好算。

   如果左右50%，那么一个div的跨度（span）就是12了。

   ![1562116018329](img/06/1562116018329.png)

   所以你应该这样（表示我各占一半）：

   ```vue
   <g-row>
   	<g-col span="12"></g-col>
   	<g-col span="12"></g-col>
   </g-row>
   ```

   同理，其它的也是如此。

2. 如果一列有三个，那么写三个g-col，跨度（24/3）都为8。

3. 如果logo占用1/12，那么就是2和22啦

4. ……

通过上边这样的语法，就可以表达无gutter这样的布局。

那么有gutter，即row div 里边有空隙呢？

在这里我们可以看到，其实每个空隙都是相等的，如果空隙不相等，是比较难弄的，当然，我们只满足相等的即可！

那么相等的gutter该怎么写呢？

直接写到g-row里边：

```
<g-row gutter="12">
	<g-col span="12"></g-col>
	<g-col span="12"></g-col>
</g-row>
```

同理，其它的g-row的gutter也是12，而不是8、6之类的。

到此为止，我们已经把一个简单的需求——把如何设计API给写完了，即不用去想用例（交互），只需要想用户怎么用就好了

有人问到「栅格有什么用呢？我工作中并没有用到。」

做出来之后，你就知道有什么用了，比如做个淘宝布局，用我们这个栅格布局，那是分分钟的事儿啊！

> 如果轮子的UI设计跟ant design、ele等重复了，你说会侵权吗？
>
> 或许他们并咩有打算说自己的这么一个框架可以用20年，所以就先这样设计一下呗！你爱重复就重复……

既然API写好了，那么接下来我们就可以开始写组件了。

## ★git branch & git checkout 的使用



















## ★总结

- 为啥要写个网格系统组件？——那是因为在grid布局出来之前，CSS的所有布局方式都可以简化为横向布局和纵向布局，那么我们为何不把这种布局方式抽象为一个组件呢？这样一来，不用每写一个页面都得重新写一遍布局了。

## ★Q&A

### ①为啥是xxx-xxx(g-row)？

关于g-row（为啥要加 `g-`），因为Vue官方建议自定义标签，最好是这样格式的 `xxx-xxx`，而这样可以避免万一哪一天「HTML6」出来了，然后自带了一个叫row的标签，这样一来岂不是跟我们的冲突了吗？所以我们应该尽量避免这种简单单词情况的发生，即我们要加个前缀 `g-`。可以看看ant design的vue实现：

![1562114818148](../../04-%E8%BD%BB%E9%A1%B9%E7%9B%AE/03-%E8%87%AA%E5%88%B6UI%E6%A1%86%E6%9E%B6%E7%AE%80%E6%98%93%E7%89%88/img/06/1562114818148.png)

React可没有这种打算，或许可以使用大写以作区别

至于为啥叫col，那是因为程序员习惯了叫col为列，即我们这个是习俗的叫法，所以入乡随乡，就叫它col好了。而它的全称是column（列、栏）。难怪叫通栏，二分栏……



















