---
typora-copy-images-to: img\04
---

# 登录

## ★课程内容

### ◇vue-cli和vue-loader版本说明

- vue-cli >= 3.0.0-beta.10

- vue-loader >= 15.0.0

  ```bash
  cnpm install -g @vue/cli@3.0.0-beta.11
  ```

| vue-cli版本   | 对应的vue-loader版本 |
| ------------- | -------------------- |
| 3.0.0-beta.9  | 14.2.1               |
| 3.0.0-beta.10 | 15.1.0               |
| 3.0.0-beta.11 | 15.1.0               |

- vue-loader v15和v14：[v14](https://vue-loader-v14.vuejs.org/zh-cn/)、[v15](https://vue-loader.vuejs.org/zh/)、[从v14迁移](https://vue-loader.vuejs.org/zh/migrating.html)
- v15和v14默认webpack配置

### ◇单vue文件组件

- [教程-单文件组件](https://cn.vuejs.org/v2/guide/single-file-components.html)：顶级元素、预处理器、CSS作用域
- 不能使用单文件组件的场景

### ◇[适配方案viewport](https://www.w3cplus.com/mobile/vw-layout-in-vue.html)

- 前身：[lib-flexible](https://github.com/amfe/lib-flexible)

- 安装插件

  ```bash
  cnpm i cssnano cssnano-preset-advanced postcss-aspect-ratio-mini postcss-cssnext postcss-import postcss-px-to-viewport postcss-url postcss-viewport-units postcss-write-svg -D
  ```

- 配置postcss

  ```js
  "postcss": {
    "plugins": {
      "postcss-import": {},
      "postcss-url": {},
      "postcss-aspect-ratio-mini": {},
      "postcss-write-svg": {
        "utf8": false
      },
      "postcss-cssnext": {},
      "postcss-px-to-viewport": {
        "viewportWidth": 375,
        "viewportHeight": 667,
        "unitPrecision": 3,
        "viewportUnit": "vw",
        "selectorBlackList": [
          ".ignore",
          ".hairlines"
        ],
        "minPixelValue": 1,
        "mediaQuery": false
      },
      "postcss-viewport-units": {},
      "cssnano": {
        "preset": "advanced",
        "autoprefixer": false,
        "postcss-zindex": false
      }
    }
  },
  ```

- 添加buggyfill

  ```html
  <script src="//g.alicdn.com/fdilab/lib3rd/viewport-units-buggyfill/0.6.2/??viewport-units-buggyfill.hacks.min.js,viewport-units-buggyfill.min.js"></script>
  <script>
    window.onload = function () {
      window.viewportUnitsBuggyfill.init({
        hacks: window.viewportUnitsBuggyfillHacks
      })
    }
  </script> 
  ```

- 案例(需在微信中打开)：http://sus.test.qi-cloud.com/#/

> 课堂源码：https://github.com/tonyfree/m.mi

### ◇样式处理

- 替换public/favicon.ico
- 引入模块：[normalize.css](https://github.com/necolas/normalize.css)
- 在assets下创建css文件夹，创建reset.css
- 在assets下创建images文件夹，把logo.png移入
- 在assets下创建fonts文件夹，引入[iconfont](http://www.iconfont.cn/)
  （字体图标的三种使用方式）

### ◇路由处理

- 删除App.vue的nav
- views下创建index.js，把路由的routes配置放在index.js中
- 创建tmp文件夹，存放样式组件(不含逻辑处理)
- 在tmp下创建MiLogin.vue组件

### ◇MiLogin.vue组件

- 结构、样式、图片
- reset.css初始化样式优化、字体图标处理
- Vue实例
- 模板语法：插值({{}})、指令(v-bind)、缩写( : @)
- 计算属性
- Class和Style绑定
- 条件渲染(v-if、v-show)
- 事件处理(v-on)
- 表单输入绑定(v-model)
- axios、RAP2
- 优化：函数节流、数据加密、scripts-serve

### ◇风格指南

- 单文件组件的文件名是单词大写开头 (PascalCase)
- 单文件组件的顶级元素的顺序
- 实例的选项的顺序(data、computed、methods)
- 元素特性的顺序(条件渲染、普通的绑定或未绑定的特性、事件)

### ◇业务场景

- 登录方式的切换
- 密码是否可见的切换
- 获取验证码
- 登录提交(校验)

### ◇作业

1. 密码不可见切换图标颜色
2. 校验：手机号码合法性校验，非空校验
3. 登录函数节流，局部加载的形式

---

## ★vue-cli和vue-loader版本说明

关于vue-loader：

> webpack loader for Vue Single-File Components

vue-cli版本越高，对于vue-loader的版本就会有要求！

如何找到用3.x的vue-cli的隐性配置？

![1568691140179](img/04/1568691140179.png)

查看它的base.js，你会看到这配置文件都是链式调用姿势，其中有入口的配置、输出路径的配置、别名配置、vue-loader（15版时需要配置这个）……

## ★单vue文件的简单说明

1. 单文件组件的顶级元素的顺序： `template`> `script`> `style`；其中前两个可以二选其中一，可以同时出现，但不可出现多个，而最后一个则可以出现多个！
2. [预处理器](https://vue-loader.vuejs.org/zh/guide/pre-processors.html#sass)（babel、Sass等）：在 webpack 中，所有的预处理器需要匹配对应的 loader。Vue Loader 允许你使用其它 webpack loader 处理 Vue 组件的某一部分。它会根据 `lang` 特性以及你 webpack 配置中的规则自动推断出要使用的 loader
3. CSS作用域：指的是你在这个组件写的样式，只对这个组件有作用，不会对它的子组件有任何影响！（有一个场景，如用swiper做左右滑动轮播时，设置作用域会对其下边的分页指示器不起作用！因此需要做些处理！当然，这跟子组件咩有半毛钱关系！）

不使用单文件组件的情景：

对老项目（用extjs、jQuery写的）进行重构，由于是jsp页面，所以前后端分离就不要想了，于是在保留jsp的情况下，用vue+element-ui根据设计稿重构了页面！

而面对这种场景显然不能用单文件组件了，只能在本地引入vue，然后直接写了！而对于页面的结构，都是表单和表格，由于这些鬼东西，或多或少都有点差异，而且又是jsp文件，所以就不能它们组件化了，毕竟该项目给的重构周期只有两个星期。

> 看到jsp就意味着前后端没有分离

总之，你得知道在无法使用单文件组件的情景下，该如何处理这些东东！

## ★适配方案viewport

> 目前出视觉设计稿，我们都是使用`750px`宽度的，那么`100vw = 750px`，即`1vw = 7.5px`。那么我们可以根据设计图上的`px`值直接转换成对应的`vw`值。在实际撸码过程，不需要进行任何的计算，直接在代码中写`px`。

资料查看：

**➹：**[amfe/lib-flexible: 可伸缩布局方案](https://github.com/amfe/lib-flexible)

**➹：**[如何在Vue项目中使用vw实现移动端适配_vw, Layout, 布局, Vue, mobile 教程_w3cplus](https://web.archive.org/web/20180925022436/http://www.w3cplus.com:80/mobile/vw-layout-in-vue.html)

效果：

你使用px单位写样式，那么会自动转化为vw单位的！

关于移动端的设计稿，一般是750px，如果咩有750px的设计稿的话，那就直接看这个

![1568711274506](img/04/1568711274506.png)



> 我没有想到做移动端适配居然是这样做的，亏我一直认为写移动端页面很难！

## ★样式处理

- 网站图标正常来说是`16*16` or `32*32`
- 要引入哪些字体图标？——校验输入值的警告图标、密码可见和不可见的图标
- 为啥要用svg图标？——有些时候，iconfont提供的图标，并不能满足我们的场景，即不能通过图标表达我们的意境，因此需要制作svg图标，而svg，修改颜色，大小，甚是方便。

## ★路由处理



## ★Q&A

### 1、什么叫预处理器？

> 在计算机科学中，预处理器是一种程序，它处理输入数据以产生输出，并作为另一个程序的输入。输出被认为是输入数据的预处理形式，它通常被一些后续程序使用，如编译器。处理的数量和种类取决于预处理器的性质；一些预处理程序只能执行相对简单的文本替换和宏扩展，而另一些具有成熟编程语言的能力。

如babel就是一个预处理器，即它是一个程序，可以把ES6的代码转译成ES5的代码，好让其它不支持ES6语法的浏览器解析！

**➹：**[Preprocessor - Wikipedia](https://en.wikipedia.org/wiki/Preprocessor)

### 2、什么叫hash值？

> 使用scoped这个属性后，该组件里边的元素会有类似hash值的属性出现

白话理解hash：

> hash，中文翻译是哈希，我在法国生活，偶尔吃steak hashe, 就是打碎混合好的牛肉饼的意思。
>
> 去肉店买肉的时候，师傅会问，你要hash-er吗？（er是的动词的词缀），就是打不打碎的意思。
>
> ![img](img/04/v2-e96b2be237f17ab478346e3bebcbaca2_hd.jpg)
>
> hash来自于生活。体现到计算机中，hash，就是把输入的东西，字符串也好，其他的什么东西也好（肉或小脆骨），打的越碎越均匀越好。

而说到hash值，就不得不扯到hash函数了：

> 哈希函数就是能将任意长度的数据映射为固定长度的数据的函数。哈希函数返回的值被叫做**哈希值**、哈希码、散列，或者直接叫做哈希。一个使用场景就是哈希表，哈希表被广泛用于快速搜索数据。

可见，hash值是某个东西被hash函数处理过后所返回的产物！而且，这个产物就那么大！

既然提到了，hash函数，那就不得不说hash表了：

> 哈希表是一种能实现关联数组的抽象数据结构，能把很多「键」映射到很多「值」上。哈希表使用哈希函数来计算索引，一个索引对应一个值。

我们看到的 JS 普通对象 `{}`、python 里边的字典等就是个hash表！

**➹：**[什么是 hash？ - 王辉的回答 - 知乎](https://www.zhihu.com/question/26762707/answer/250667078)

**➹：**[什么是 hash？ - 方应杭的回答 - 知乎](https://www.zhihu.com/question/26762707/answer/260230845)

**➹：**[唠叨一下js对象与哈希表那些事 - 前端小事 - SegmentFault 思否](https://segmentfault.com/a/1190000007692754#articleHeader1)

### 3、dart-sass是什么东东？

在使用 vue-cli创建一个项目的时候，我选择了使用 css预处理器，结果它给了多个选择我，如选择dart-sass的还是node-sass的

由于dart-sass是默认选择的，于是我就用它了！

关于eslint，我选择使用 prettier 作为的组合 。

**➹：**[如何评价 dart-sass？ - 知乎](https://www.zhihu.com/question/301055443)

**➹：**[前端构建秘籍 - 掘金](https://juejin.im/post/5c9075305188252d5c743520#heading-31)

**➹：**[国内 CSS 预处理器 Less、Sass、Stylus 的实践代表分别有哪些？ - 知乎](https://www.zhihu.com/question/26810568)

