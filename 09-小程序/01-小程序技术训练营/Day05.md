---
typora-copy-images-to: img\05
---

# 生命周期

> 资源：[生命周期](https://tencentcloudbase.github.io/handbook/tcb14.html)

## ★小程序和页面的生命周期

* App()：
  + 该函数在哪儿？—— app.js
  + 调用它干嘛？——注册小程序
  + 需要给它传啥参数？——对象 Object 类型的参数
  + 该对象参数里边默认有啥东西？——一些生命周期函数和事件处理函数
  + 何时调用它？——App() 必须在 app.js 中调用，必须调用且只能调用一次。
  + 开发者针对这个参数能做什么？——开发者可以添加任意的函数或数据变量到 `Object` 参数中，而且可以用 `this` 来访问这个 `Object` 
* Page()：
  + 在哪儿？——你创建一个页面，那么就会自动生成 4 个文件，而该函数就在页面的 js 文件里边哈
  + 调用它干啥？—— 注册小程序中的一个页面
  + 其它使用操作同上

> 为什么我们在 App() 和 Page() 里边不能直接用等号=给变量赋值？你明白了吗？注意函数语句与对象属性与方法在写法上的不同。

关于callback的触发：

> 之前我们已经了解到，通过**点击事件**可以触发事件处理函数，也就是需要**用户来点击**某个组件才能触发；这里**页面的生命周期函数**也可以触发事件处理函数，它**不需要用户点击组件**，只需要用户打开小程序、打开某个页面，把小程序切后台等情况时就能触发里面的函数。

### ◇小程序打开场景值

![场景值体现](assets/img/2019-10-29-18-55-40.png)

如何获取这个场景直？

> 在  `App` 的  `onLaunch` 和  `onShow` 打印的对象里有一个scene为1001，这个是场景值。

![获取场景直](assets/img/2019-10-29-18-58-41.png)

场景值有啥用？

> 场景值用来描述**用户进入小程序的路径方式**。用户进入你的小程序的方式有很多，比如有的是扫描二维码、有的是长按图片识别二维码，有的是通过微信群进入的小程序，有的是朋友单聊进入的小程序，有的是通过公众号进入的小程序等等，这些就是场景值，而具体的场景值，可以看技术文档，**场景值对产品、运营来说非常重要**。

 **技术文档：**[场景值列表](https://developers.weixin.qq.com/miniprogram/dev/reference/scene-list.html) 






## ★总结

* 事件有冒泡，Target 和 currentTarget 有区别：

![1570358872301](img/05/1570358872301.png)

* 在测试一些东西的时候，以下 log 信息甚是讨厌：

![1570358491967](img/05/1570358491967.png)

* 写在组件上的的 `data-` 数据，可以通过 `currentTarget` 或者 `target` 的 dataset 获取，后者一般不安全，因为如果发生冒泡，那么该 dataset 的值就是来自于源头的那个东西，而不是因为冒泡而触发事件执行的那个元素。

  

![1570359307368](img/05/1570359307368.png)

  假如有路由跳转，那么会执行事件源的那个事件的路由，即我点击图片，那就执行图片的路由，而不是它爸爸的路由！

* 小程序不支持 navigateTo 的外链跳转

* 小程序也支持给 `data-*` 属性添加 wxss 样式，比如我们可以给 `data-pid` 添加样式， `view[data-pid]{margin:30px;}` ， `data-*` 属性既可以类似于选择器一样的存在，也可以对它进行编程，是不是很强大？

* id、class、style 甚至点击事件都是组件携带的数据，都可以用来编程，总之，多利用事件对象获取组件上的数据来进行编程。

