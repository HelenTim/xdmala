---
typora-copy-images-to: img\04\01
---

# 面向对象（上）

## ★总览

### ◇上节课答案

![1548581350799](img/04/01/1548581350799.png)

用图解释一波：

![1554810528644](img/04/01/1554810528644.png)

**➹：**[一个简单的 Promise 实现](https://judes.me/tech/frontend/2017/03/12/a_simple_promise.html)

> 这个答案我没有去看……

### ◇面向对象解决的问题

并不是：封装、继承、多态
而是写代码的套路问题（定势思维）

### ◇对象与函数的关系

JS中对象函数没有关系，JS之父通过this 强行使得它们有关系。

`obj.fn.call(obj,1,2,3)=>obj.fn(1,2,3)`

### ◇对象与对象的关系

## ★封装和继承

接下来，我们要讲的是JS中的面向对象，而不是其它语言的面向对象，毕竟JavaScript的面向对象跟其它语言的都不太一样！

### ◇什么是面向对象？

在上节课里边，我们讲到了异步，但发现没有用到对象！当然，我们用到了很多函数，然而在面向对象这个领域里边，是咩有**函数**这个词的！

![震惊](img/04/01/images.jpg)

画个图解释一波：

![1554986158985](img/04/01/1554986158985.png)

我一直觉得面向对象就是一个宗教，即你有信仰，认为世界万物都是有出处的！在这里，我把宗教分为两个，一个是「面向对象」教，还有一个是「函数式」教，当然还有个无教派，即认为这两个教都挺好的，我都可以加入这两个教，总之，无教派者们认为「自己无须一直遵循某种特定的教义，该什么时候用就什么时候用，即需要用面向对象就面向对象，需要用函数式就函数式，而不是要么这个式，要么那个式，选择一个之后，就终身不能选择另外一个了！简而言之，我两个都喜欢！」

回过头来看，函数式教，如我们之前的 `new Promise(fn)`，`Promise(fn)`就是个函数式，而加上个new就变成是面向对象式了！

而在面向对象式教里边，是没有「函数」这个词的！就像有些教义是咩有同性恋的，也没有离婚的，不允许吃荤的等等，总之一般来说教义都有推崇什么，反对什么，像面向对象它就没有函数一说！

既然没有函数，那它对应的是什么呢？——就是「类」啦！

你要知道的是面向对象的核心可不是对象呀！核心是**类**呀！

但是在JavaScript里边，是**咩有类**的！所以这就很尴尬了呀！

![](img/04/01/1.jpg)

于是，与类对等的东西就出现了，而这个东西叫做「**构造函数**」

那么什么是构造函数呢？我们之前有讲到过，但现在让我们来再次回顾一下它的定义：

> 如果一个函数返回了一个对象，那么这个函数就叫做构造函数啦！

而类呢？**如果一个东西，它返回了对象，那么这个东西就叫做类**！

所以，我们可以看到，它们俩是一个定义的，因此，我们大可认为「**所谓的类就是构造函数！**」

小结：

- 大致理解一下函数式和面向对象式的区别即可，比如关于面向对象：

  - 什么是类？什么是构造函数？

  而关于函数式则是：

  - 只讲函数，没有类，甚至连对象都不想讲！总之，就是全函数！

### ◇面向对象要解决的问题是什么？

> 换言之，就是为什么会有面向对象？

如果你学过面向对象的话，那么你听到最多的就是这三面大旗了——**封装、继承和多态**！

然而，在我看来这是很扯淡的一件事！

为什么这么说呢？——因为所有东西都可以有这三面大旗啊！并不是说只有你面向对象教才有的！只不过，你面向对象特别喜欢这三个东西罢了！

#### 什么是封装？

![1554990542483](img/04/01/1554990542483.png)

封装就是隐藏细节！为什么要隐藏细节呢？有这么两种情况：

1. 一个是自己（A）对自己（A）隐藏细节
2. 一个是自己（A）对别人（B）隐藏细节

我们先来看第二种情况，因为这个好说一点。举例来说，假如A是jQuery的作者，他提供了一个方法叫做 `$.get(url)`，而这样对B来说就很very good了！因为B只需要传给url过去，然后 `$.get(url).then(success)`即可！所以这就叫做隐藏细节了！毕竟B只需要传两个参数即可！

所以这样做的好处就是「我们合作起来特别顺畅！」即，你不用管我 `$.get()`到底用了什么技术，我只给了提供一个优雅的API，而你用这个API就能到达你的目的了！而我则保证「我把这个get和then写得好好的！」这样一来，这个就有助于我们双方之间的合作了呀！

所以说，**封装，在人和人之间意义就是有助于合作和交流，甚至不用交流，看这个API的名字就知道怎么做了**！

如果是自己对自己呢？

比如说，我们写了一百行代码！而这100行代码是我们一行行写的！而且这里边的代码是一个很复杂的逻辑，由于我们不想每次都得 把这100行代码都给看一遍，毕竟忒他妈麻烦了！于是我们就对它取了一个名字—— `跟女孩搭讪（女孩名字）`

有了名字之后，我们就可以把代码（假如里边代码是搭讪的套路）封装起来了，我们只需要传一个女孩的名字，然后我们就可以自动的去找这个女孩，自动的去搭讪，然后结果呢？就是成功或失败！

可以看到，我们不需要去了解是如何去搭讪的，只需要传个女孩的名字即可！

那么，这样做到底有什么好处呢？

就是可以解决你自己这个的思维负担！

为什么说可以解决思维负担呢？

因为这100行代码，你只要给它们取一个名字，或者 说给它们封装成一个对象，或者封装成一个类！以后，你只需要看这个名字，你就知道这是要跟女孩搭讪

至于是说「女孩你掉了一块砖？」「你的钱掉了？」还是其它等等什么的搭讪技巧，自己就不需要管了

总之，这就是**自己对自己分装，用于减少自己的思维负担，方便写出条理更清楚的代码**！

那么问题来了？你说这两种情况一定要用面向对象姿势弄出来吗？

显然，这是不一定的！因为，我简单地用一个函数也可以做到啊！

所以说，面向对象可以实现封装，但不代表只有面向对象可以封装，只要你是隐藏细节，就都可以叫做封装！

比如说，你把100行代码**变成一个function**，那么这个是不是封装呢？——答案，显然是的！

把100行代码**变成一个对象**，同样也是封装！

把100行代码**变成一个url**，同样也算是封装！

………

为什么说url也行呢？因为，你一旦get我这个url，那么我后台就得去做事情了！然后把结果响应回来给你了！

所以，**你只要把细节隐藏了，那就是封装了！**



















## ★总结



## ★Q&A